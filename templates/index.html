<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Strategy Agent</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
</head>

<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon"><i class="fas fa-chart-line"></i></div>
                <div>
                    <div>Trading Strategy Agent</div>
                    <div class="header-subtitle">AI-Powered Market Analysis</div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="control-panel">
            <div class="control-row">
                <div class="form-group">
                    <label class="form-label" for="symbol">Stock Symbol</label>
                    <select id="symbol" class="form-select">
                        <optgroup label="Indian Stocks (NSE)">
                            <option value="RELIANCE.NS">RELIANCE.NS - Reliance Industries</option>
                            <option value="TCS.NS">TCS.NS - Tata Consultancy Services</option>
                            <option value="HDFCBANK.NS">HDFCBANK.NS - HDFC Bank</option>
                            <option value="INFY.NS">INFY.NS - Infosys</option>
                            <option value="ICICIBANK.NS">ICICIBANK.NS - ICICI Bank</option>
                            <option value="HINDUNILVR.NS">HINDUNILVR.NS - Hindustan Unilever</option>
                            <option value="SBIN.NS">SBIN.NS - State Bank of India</option>
                            <option value="BHARTIARTL.NS">BHARTIARTL.NS - Bharti Airtel</option>
                            <option value="BAJFINANCE.NS">BAJFINANCE.NS - Bajaj Finance</option>
                            <option value="WIPRO.NS">WIPRO.NS - Wipro</option>
                            <option value="KOTAKBANK.NS">KOTAKBANK.NS - Kotak Mahindra Bank</option>
                            <option value="LT.NS">LT.NS - Larsen & Toubro</option>
                            <option value="AXISBANK.NS">AXISBANK.NS - Axis Bank</option>
                            <option value="MARUTI.NS">MARUTI.NS - Maruti Suzuki</option>
                            <option value="TATAMOTORS.NS">TATAMOTORS.NS - Tata Motors</option>
                        </optgroup>
                        <optgroup label="US Stocks">
                            <option value="AAPL" selected>AAPL - Apple Inc.</option>
                            <option value="GOOGL">GOOGL - Alphabet (Google)</option>
                            <option value="MSFT">MSFT - Microsoft</option>
                            <option value="AMZN">AMZN - Amazon</option>
                            <option value="TSLA">TSLA - Tesla</option>
                            <option value="META">META - Meta (Facebook)</option>
                            <option value="NVDA">NVDA - NVIDIA</option>
                            <option value="JPM">JPM - JPMorgan Chase</option>
                            <option value="V">V - Visa</option>
                            <option value="JNJ">JNJ - Johnson & Johnson</option>
                        </optgroup>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label" for="period">Time Period</label>
                    <select id="period" class="form-select">
                        <option value="1mo">1 Month</option>
                        <option value="3mo" selected>3 Months</option>
                        <option value="6mo">6 Months</option>
                        <option value="1y">1 Year</option>
                        <option value="2y">2 Years</option>
                    </select>
                </div>

                <button class="btn btn-primary" onclick="analyzeStock()">
                    <i class="fas fa-search"></i> Analyze
                </button>
                <button class="btn btn-secondary" onclick="runBacktest()">
                    <i class="fas fa-history"></i> Backtest
                </button>
            </div>
        </div>

        <!-- Available Stocks Section -->
        <div class="card stocks-list-card">
            <div class="card-header" onclick="toggleStocksList()">
                <h2 class="card-title"><i class="fas fa-list"></i> Available Stocks (25 Total)</h2>
                <i class="fas fa-chevron-down toggle-icon" id="toggleIcon"></i>
            </div>
            <div class="stocks-container" id="stocksContainer">
                <div class="stocks-grid">
                    <div class="stocks-column">
                        <h3><i class="fas fa-flag"></i> Indian Stocks (NSE) - 15</h3>
                        <table class="stocks-table">
                            <thead>
                                <tr>
                                    <th>Symbol</th>
                                    <th>Company</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>RELIANCE.NS</td>
                                    <td>Reliance Industries</td>
                                </tr>
                                <tr>
                                    <td>TCS.NS</td>
                                    <td>Tata Consultancy Services</td>
                                </tr>
                                <tr>
                                    <td>HDFCBANK.NS</td>
                                    <td>HDFC Bank</td>
                                </tr>
                                <tr>
                                    <td>INFY.NS</td>
                                    <td>Infosys</td>
                                </tr>
                                <tr>
                                    <td>ICICIBANK.NS</td>
                                    <td>ICICI Bank</td>
                                </tr>
                                <tr>
                                    <td>HINDUNILVR.NS</td>
                                    <td>Hindustan Unilever</td>
                                </tr>
                                <tr>
                                    <td>SBIN.NS</td>
                                    <td>State Bank of India</td>
                                </tr>
                                <tr>
                                    <td>BHARTIARTL.NS</td>
                                    <td>Bharti Airtel</td>
                                </tr>
                                <tr>
                                    <td>BAJFINANCE.NS</td>
                                    <td>Bajaj Finance</td>
                                </tr>
                                <tr>
                                    <td>WIPRO.NS</td>
                                    <td>Wipro</td>
                                </tr>
                                <tr>
                                    <td>KOTAKBANK.NS</td>
                                    <td>Kotak Mahindra Bank</td>
                                </tr>
                                <tr>
                                    <td>LT.NS</td>
                                    <td>Larsen & Toubro</td>
                                </tr>
                                <tr>
                                    <td>AXISBANK.NS</td>
                                    <td>Axis Bank</td>
                                </tr>
                                <tr>
                                    <td>MARUTI.NS</td>
                                    <td>Maruti Suzuki</td>
                                </tr>
                                <tr>
                                    <td>TATAMOTORS.NS</td>
                                    <td>Tata Motors</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="stocks-column">
                        <h3><i class="fas fa-globe"></i> US Stocks - 10</h3>
                        <table class="stocks-table">
                            <thead>
                                <tr>
                                    <th>Symbol</th>
                                    <th>Company</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>AAPL</td>
                                    <td>Apple Inc.</td>
                                </tr>
                                <tr>
                                    <td>GOOGL</td>
                                    <td>Alphabet (Google)</td>
                                </tr>
                                <tr>
                                    <td>MSFT</td>
                                    <td>Microsoft</td>
                                </tr>
                                <tr>
                                    <td>AMZN</td>
                                    <td>Amazon</td>
                                </tr>
                                <tr>
                                    <td>TSLA</td>
                                    <td>Tesla</td>
                                </tr>
                                <tr>
                                    <td>META</td>
                                    <td>Meta (Facebook)</td>
                                </tr>
                                <tr>
                                    <td>NVDA</td>
                                    <td>NVIDIA</td>
                                </tr>
                                <tr>
                                    <td>JPM</td>
                                    <td>JPMorgan Chase</td>
                                </tr>
                                <tr>
                                    <td>V</td>
                                    <td>Visa</td>
                                </tr>
                                <tr>
                                    <td>JNJ</td>
                                    <td>Johnson & Johnson</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div id="loading" class="card loading-state" style="display: none;">
            <div class="spinner"></div>
            <p class="loading-text">Analyzing market data...</p>
        </div>

        <div id="results" style="display: none;">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-chart-bar"></i> Market Overview</h2>
                </div>
                <div id="marketInfo" class="data-grid"></div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-chart-area"></i> Technical Indicators</h2>
                </div>
                <div id="indicators"></div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-bullseye"></i> Trading Strategy</h2>
                </div>
                <div id="strategy"></div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-chart-line"></i> Price History</h2>
                </div>
                <div id="chart" class="chart-container"></div>
            </div>

            <div class="card" id="backtestResults" style="display: none;">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-calculator"></i> Backtest Results</h2>
                </div>
                <div id="backtestData" class="data-grid"></div>
                <div id="portfolioChart" class="chart-container"></div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
    <script>
        function toggleStocksList() {
            const container = document.getElementById('stocksContainer');
            const icon = document.getElementById('toggleIcon');
            container.classList.toggle('collapsed');
            icon.classList.toggle('rotated');
        }
    </script>
</body>

</html>